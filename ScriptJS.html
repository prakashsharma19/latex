async function scrapeData() {
  const url = document.getElementById('urlInput').value;
  if (!url) {
    alert('Please enter a valid URL.');
    return;
  }

  try {
    // Fetch the HTML content from the website
    const response = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(url)}`);
    const data = await response.json();

    // Parse the HTML response
    const parser = new DOMParser();
    const doc = parser.parseFromString(data.contents, 'text/html');

    // Extract email addresses
    const rows = [];
    doc.querySelectorAll('a[href^="mailto:"]').forEach((emailLink) => {
      const email = emailLink.getAttribute('href').replace('mailto:', '');
      const name = emailLink.textContent.trim() || 'N/A';
      rows.push({ name, email });
    });

    // Display the results in the table
    const tableBody = document.querySelector('#dataTable tbody');
    tableBody.innerHTML = ''; // Clear any previous results
    rows.forEach(({ name, email }) => {
      const row = `<tr><td>${name}</td><td>${email}</td></tr>`;
      tableBody.innerHTML += row;
    });

    if (rows.length === 0) {
      alert('No emails found on this page.');
    }
  } catch (error) {
    console.error('Error scraping data:', error);
    alert('Failed to fetch data. Please try a different URL.');
  }
}
